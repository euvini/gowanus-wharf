'use client'
import React from 'react';
import { useEffect, useState } from 'react';
import { useSpring, animated, AnimatedProps } from 'react-spring';

const GowanusLogoAnimated = () => {
    const [toggle, setToggle] = useState(false);
    const [showNameLogo, setShowNameLogo] = useState(false);
    const [isFixed, setIsFixed] = useState(false);
    const [topPosition, setTopPosition] = useState<string | number>();

    useEffect(() => {
        const updateWindowHeight = () => {
            const height = window.innerHeight;
            setTopPosition((height / 2) - 40);
        };

        window.addEventListener('resize', updateWindowHeight);

        updateWindowHeight();

        return () => {
            window.removeEventListener('resize', updateWindowHeight);
        };
    }, []);

    const scrollToTop = () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }

    const { width } = useSpring({
        width: toggle ? 221 : 0,
        from: { width: 0 },
        config: { duration: 3000, velocity: 0 },
        onRest: () => setShowNameLogo(true),
        onStart: () => setShowNameLogo(false),
    });

    const fadeTopBottomAnimation = useSpring(
        showNameLogo ? {
            opacity: showNameLogo ? 1 : 0,
            marginTop: showNameLogo ? 0 : -50,
            delay: 1000,
            onRest: () => {
                setTimeout(() => {
                    setShowNameLogo(false);
                    setIsFixed(true);
                }, 1000);
            },
        } : {
            opacity: !showNameLogo ? 0 : 1,
            marginTop: !showNameLogo ? -50 : 0,
            delay: 1000,
            onRest: () => {
                setTimeout(() => {
                    setShowNameLogo(false);
                    setIsFixed(true);
                }, 1000);
            },
        }
    );

    const fadeBottomTopAnimation = useSpring(
        showNameLogo ? {
            opacity: showNameLogo ? 1 : 0,
            marginBottom: showNameLogo ? 0 : -50,
            delay: 1000,
            onRest: () => {
                setTimeout(() => {
                    setShowNameLogo(false);
                    setIsFixed(true);
                }, 1000);
            },
        } : {
            opacity: !showNameLogo ? 0 : 1,
            marginBottom: !showNameLogo ? -50 : 0,
            delay: 1000,
            onRest: () => {
                setTimeout(() => {
                    setShowNameLogo(false);
                    setIsFixed(true);
                }, 1000);
            },
        }
    );

    const moveUpAnimation = useSpring<AnimatedProps<React.CSSProperties>>({
        top: isFixed && !showNameLogo ? -15 : topPosition,
        position: 'fixed',
        width: 221,
        height: 120,
        zIndex: 10,
        alignItems: 'center',
        justifyContent: 'center',
        flexDirection: 'column',
        display: 'flex',
        gap: 16,
        config: { duration: 4000 }
    });

    useEffect(() => {
        setToggle(true)
    }, [])

    return (
        <animated.div style={moveUpAnimation} onClick={scrollToTop}>
            <animated.svg
                width={194}
                height={19}
                fill="none"
                style={{ display: 'block', ...fadeBottomTopAnimation }}
            >
                <animated.path
                    fill="#fff"
                    filter={"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0"}
                    d="M10.628 8.59v2.787a122.84 122.84 0 0 1 6.167-.307c-.207 3.458-2.966 4.849-6.575 4.849-4.335 0-6.81-2.14-6.81-6.552 0-4.05 2.324-6.474 6.888-6.474 3.38 0 5.547 1.34 6.86 2.838l2.167-2.374C17.365 1.424 15.018.005 10.298.005 3.568.005.138 3.898.138 9.573s3.636 9.233 10.032 9.233c5.133 0 9.546-2.552 9.546-8.69V8.774c-3.044.028-6.06 0-9.077-.18l-.011-.005ZM37.502 18.8c6.888 0 10.345-3.87 10.345-9.545S44.133 0 37.631 0C31.129 0 27.47 3.893 27.47 9.283c0 6.033 3.636 9.518 10.032 9.518Zm.129-15.912c4.413 0 6.915 2.117 6.915 6.423s-2.324 6.63-6.988 6.63c-4.335 0-6.781-2.167-6.781-6.602 0-4.022 2.295-6.446 6.86-6.446l-.006-.005ZM77.302 14.623c-1.96-4.748-4.15-9.49-5.753-14.238h-3.765l-5.055 14.059A255.68 255.68 0 0 1 57.567.385h-3.765c2.425 6.11 4.592 11.763 6.837 18.053h3.145L69.225 3.53c2.061 4.926 4.435 9.931 6.296 14.908h2.994c2.53-5.982 4.67-11.814 7.3-18.053h-3.971c-1.29 4.899-2.938 9.546-4.541 14.238ZM98.786.385C96 6.138 92.904 12.612 89.86 18.437h3.843a107.419 107.419 0 0 1 1.883-4.619c1.212-.078 3.044-.128 4.848-.128 1.805 0 3.743.05 4.899.1.62 1.52 1.24 3.044 1.855 4.642h3.971A412.192 412.192 0 0 1 102.646.379h-3.87l.01.006Zm1.883 10.858c-1.313 0-2.631-.028-3.944-.078a319.61 319.61 0 0 1 3.765-8.278 215.32 215.32 0 0 1 3.743 8.306c-1.184.028-2.374.05-3.558.05h-.006ZM134.587 14.187C131.18 9.881 126.85 4.798 123.621.391h-4.619c.05 4.334.078 14.6 0 18.053h3.508c-.307-4.564-.436-10.702-.569-14.88 3.815 4.591 8.227 10.55 11.786 14.88h3.508c0-3.972.129-13.389.234-18.053h-3.38c.158 3.636.414 9.646.493 13.796h.005ZM162.629 9.646c0 4.977-1.626 6.189-5.312 6.189-3.944 0-5.419-1.704-5.419-6.01 0-2.994-.027-6.63.078-9.44h-3.273c.101 3.145.027 5.725.027 10.574 0 5.133 2.995 7.764 8.385 7.764 6.09 0 8.692-3.33 8.692-7.971 0-5.34 0-8.64.05-10.367h-3.272c.028 3.044.05 5.703.05 9.261h-.006ZM185.431 15.941c-4 0-6.396-1.111-8.15-2.68l-2.011 2.373c1.933 1.882 4.977 3.2 9.546 3.2 6.061 0 8.486-2.088 8.486-5.311s-2.531-4.899-8.072-5.519c-4.692-.491-6.039-1.262-6.039-2.837 0-1.47 1.241-2.346 4.978-2.346 3.38 0 5.518 1.055 6.809 2.374l2.039-2.374c-1.91-1.754-4.463-2.81-8.642-2.81-5.211 0-8.256 1.754-8.256 5.161 0 3.407 2.553 4.899 7.737 5.468 5.262.442 6.267 1.391 6.267 2.81 0 1.547-1.24 2.502-4.692 2.502v-.01Z"
                />
            </animated.svg>
            <animated.div style={{ width: '100%', height: 34, display: 'flex', justifyContent: 'center', flexDirection: 'column' }}>
                <animated.svg
                    width={width}
                    height={12}
                    fill="none"
                    style={{ alignSelf: 'flex-start' }}
                >
                    <animated.path
                        fill="#fff"
                        d="M221 7.485 205.061.883l-17.882 7.408L169.297.883 151.41 8.291 133.528.883 117.5 7.52c-1.481.555-2.827.889-3.609.889-3.944 0-5.877-1.529-8.112-3.301-2.424-1.923-5.178-4.101-10.58-4.101s-8.145 2.122-10.615 4c-2.44 1.857-4.547 3.457-9.05 3.457-4.502 0-6.608-1.595-9.072-3.44-2.508-1.883-5.346-4.017-10.793-4.017-5.447 0-8.285 2.134-10.793 4.017-2.458 1.845-4.587 3.44-9.072 3.44-4.486 0-6.615-1.595-9.073-3.44-2.508-1.883-5.346-4.017-10.793-4.017-5.447 0-8.285 2.134-10.793 4.017C3.536 6.23 2.073 7.324 0 7.941v2.929c3.045-.717 5.045-2.212 6.866-3.58 2.458-1.844 4.58-3.44 9.072-3.44 4.492 0 6.609 1.596 9.072 3.44 2.509 1.885 5.347 4.018 10.794 4.018 5.446 0 8.284-2.133 10.793-4.017 2.458-1.845 4.586-3.44 9.072-3.44 4.486 0 6.614 1.595 9.072 3.44 2.509 1.884 5.347 4.017 10.793 4.017 5.447 0 8.29-2.145 10.782-4.04 2.408-1.833 4.492-3.412 8.877-3.412 4.386 0 6.542 1.695 8.799 3.485 2.318 1.84 4.949 3.923 9.893 3.923 1.464 0 3.319-.583 4.665-1.09l14.972-6.195 17.882 7.407 17.888-7.407 17.882 7.407 17.882-7.407 15.938 6.602V7.5l.006-.016Z"
                    />
                </animated.svg>
            </animated.div>
            <animated.svg
                width={140}
                height={19}
                fill="none"
                style={{ display: 'block', ...fadeTopBottomAnimation }}
            >
                <animated.path
                    fill="#fff"
                    d="M10.162 18.826 15.38 3.918c2.061 4.926 4.212 9.931 6.072 14.908h2.994c2.53-5.982 4.446-11.814 7.077-18.053h-3.971c-1.29 4.899-2.77 9.54-4.318 14.238-1.96-4.748-3.927-9.49-5.53-14.238h-3.765l-4.832 14.06C7.252 9.938 5.61 5.482 4.13.772H.365c2.424 6.111 4.412 11.764 6.658 18.053h3.145-.005ZM43.316 18.826c-.05-2.474-.079-4.977-.079-7.457 4.022-.078 7.921-.078 11.502 0 0 2.475 0 4.977-.028 7.457h3.273a694.59 694.59 0 0 1 0-18.053h-3.273c.028 2.603.028 5.212.028 7.842a239.37 239.37 0 0 1-11.502-.027c0-2.603.028-5.212.078-7.815h-3.3a694.59 694.59 0 0 1 0 18.053h3.3ZM71.508 14.212c1.212-.078 3.044-.128 4.849-.128 1.804 0 3.742.05 4.899.1.62 1.52 1.24 3.044 1.854 4.642h3.972A409.253 409.253 0 0 1 78.57.773h-3.871C71.91 6.527 68.816 13 65.77 18.826h3.844a107.333 107.333 0 0 1 1.882-4.62l.011.006Zm4.9-10.936a215.67 215.67 0 0 1 3.742 8.306c-1.184.027-2.374.05-3.559.05-1.318 0-2.63-.028-3.943-.079 1.134-2.58 2.396-5.39 3.765-8.277h-.006ZM98.226 18.826c-.028-2.524-.05-5.055-.078-7.585 1.391.05 3.994.1 5.078.1 3.016 3.251 4.955 5.854 6.318 7.48h4.306v-.514c-2.938-2.553-5.625-5.776-7.117-7.273 3.224-.67 4.877-2.424 4.877-4.898-.027-3.687-2.531-5.547-7.972-5.547-2.396 0-6.523.079-8.663.179h-.028c.05 2.994.05 6.01.05 9.026s0 6.01-.05 9.026h3.274l.005.006Zm-.022-15.472c1.084-.078 3.066-.1 5.234-.128 2.888 0 4.899.642 4.877 2.938 0 1.96-1.676 2.58-4.541 2.58-2.168 0-4.359-.1-5.62-.234 0-1.726.028-3.458.05-5.161v.005ZM126.469 18.826c-.05-2.452-.078-4.898-.078-7.35 2.089 0 6.536.257 11.256.491V9.08h-11.256c0-1.882.028-3.764.028-5.647 4.15-.078 8.289.05 13.344.364V.779h-16.545c.051 6.01.051 12.043 0 18.053h3.251v-.006Z"
                />
            </animated.svg>

        </animated.div>
    );
};

export default GowanusLogoAnimated;
